# Technician(기사) 화면 스펙

## TL;DR
- **목적:** 현장 작업을 3~5분 내 완료하고, 체크리스트 + 서명(필수) + (사진 권장)을 통해 **증빙 기반 완료 제출**을 만든다.
- **기본 흐름:** **M-01(작업 목록) → M-02(작업 상세/수행/제출)**  
- **핵심 화면:** M-02 (작업 상세 - 모바일 웹 전용)
- **문구 표준:** UI는 **OK / 이상 / 해당없음**, 저장값은 **PASS / FAIL / NA** (표시만 변환)

---
## 📱 M-01 작업 목록 (모바일 수행 화면)
- 상세 스펙: [M-01 기사 작업 목록](05-m01-spec.md)

## 📱 M-02 작업 상세 (모바일 수행 화면)

### 1. 화면 개요 및 목표
기사가 현장에 도착하여 작업을 수행하고, 3~5분 내에 모든 데이터를 입력하여 완료 제출을 마칠 수 있도록 설계합니다.

### 2. 사용자 업무 플로우 (Step-by-Step)
1. **작업 확인:** 현장 주소, 담당자 연락처, 특이사항 확인 (지도/전화 연동)
2. **작업 시작:** [작업 시작] 버튼 클릭 (상태: `IN_PROGRESS` 전환)
3. **체크리스트:** 필수 항목(10~12개) 점검 및 PASS/FAIL 선택
4. **사진 수집:** 작업 전/후 사진 촬영 및 업로드 (권장 사항)
5. **고객 서명:** 서명자 성명 입력 및 디지털 서명 패드 날인 (필수)
6. **완료 제출:** 검증 루틴 통과 후 [완료 제출] 클릭 ➔ 서버 자동 처리 시작

---

## 📋 핵심 입력 및 검증 규칙

### 1) 체크리스트 입력 (PASS / FAIL / NA)
- **자동 저장:** 항목 선택 시 수동 저장 버튼 없이 즉시 서버에 저장(Autosave)됩니다.
- **예외 처리:** `FAIL` 선택 시 사유 메모 입력창이 자동으로 나타나며, 필수 입력값입니다.
- **검증:** 모든 필수 항목이 채워지지 않으면 '완료 제출' 버튼이 비활성화되거나 안내 토스트가 노출됩니다.

### 2) 고객 서명 (시스템 핵심 증빙)
- **필수 데이터:** 서명자 이름, 서명 이미지 데이터
- **잠금 장치:** [서명 저장] 버튼을 눌러 데이터가 서버에 전송 완료되어야 완료 제출이 가능합니다.

### 3) 사진 업로드 (권장 정책)
- **구성:** 작업 전(BEFORE), 작업 후(AFTER) 섹션 구분
- **정책:** Phase 1에서는 권장 사항으로 운영하며, 미업로드 시에도 완료 처리가 가능하도록 유연하게 대응합니다.

---

## 🛠️ UI 텍스트 목업 (Mobile Mockup)

### [M-02 메인 화면]
- **헤더:** `[설치] 진행중 📞`
- **현장 정보:** `OO마트 OO점 | 010-****-**** [전화] [지도]`
- **체크리스트 섹션:** 
  - `필수 체크 (완료 5/12) ⌄`
  - `1. 설치 위치 확인: [OK] [이상] [해당없음]`
- **서명 섹션:**
  - `서명자 이름: [ 홍길동 ]`
  - `[ 서명 패드 영영 ]`
  - `[서명 지우기] [서명 저장]`

---

## 📑 M-02 완료 제출 DoD (Phase 1 고정)

완료 제출(=COMPLETED 전이)은 서버 검증을 통과해야만 성공한다.  
클라이언트(UI)는 “가이드”이며, **서버가 최종 판정**한다.

### A. 체크리스트
- [ ] WorkOrder 유형(INSTALL/AS)에 해당하는 **필수 체크 항목이 전부 입력**되어야 한다.
- [ ] 각 항목의 UI 선택지는 **OK / 이상 / 해당없음**이며, 저장값은 **PASS / FAIL / NA**를 유지할 수 있다.

### B. FAIL(이상) 처리 규칙
- [ ] 항목이 **이상(FAIL)** 인 경우, 해당 항목에 대한 **메모 입력이 필수**다.
- [ ] 메모 미입력 상태에서는 완료 제출이 실패해야 한다.

### C. 서명(필수)
- [ ] 고객 서명(사인 데이터) 저장은 **필수**다.
- [ ] 서명자 이름(또는 관계/성명) 입력도 **필수**다.
- [ ] 서명 데이터가 없거나 이름이 비어 있으면 완료 제출이 실패해야 한다.

### D. 사진(Phase 1 기본: 권장)
- [ ] 사진 첨부는 Phase 1에서 **권장**(기본 완료조건에 포함하지 않음)
- [ ] 정책 토글로 “사진 필수”를 켤 수 있으며, ON이면 사진 미첨부 시 완료 제출 실패

### E. 제출 이후 처리 (최소)
- [ ] 완료 제출 성공 시 서버는 **PDF 생성/보관(최소)** 을 수행한다.
- [ ] 완료 후 수정은 Phase 1 기본값 **불가** (정책 토글로 확장 가능)

### F. 실패 시 사용자 메시지(권장 마이크로카피)
- 체크리스트 누락: `필수 항목을 모두 입력해주세요.`
- FAIL 메모 누락: `이상 항목은 메모가 필요해요.`
- 서명 누락: `고객 서명이 필요해요.`
- 서명자 이름 누락: `서명자 이름을 입력해주세요.`
- (토글 ON) 사진 누락: `사진을 첨부해주세요.`

---

## 🏁 완료 제출 및 후속 처리

### 1. 제출 전 최종 체크 (Server/Client Validation)
- [ ] 필수 체크리스트 항목 누락 여부
- [ ] FAIL 항목에 대한 메모 입력 여부
- [ ] 고객 서명 데이터 저장 여부

### 2. 제출 후 동작
- 상태가 `COMPLETED`로 변경되며 편집이 즉시 제한됩니다.
- "완료되었습니다. 보고서 PDF는 잠시 후 자동 발송됩니다." 안내를 표시합니다.

---

## 연관 문서
- [체크리스트 상세 항목](../10-domain/02-checklist-policy.md)
- [M-02 구현 스펙](../30-implementation/01-m02-spec.md)

## 변경 이력
- **v0.1:** 통합문서 기반 초안 정리 (2025-02-20)
