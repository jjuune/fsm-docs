# Team Manager(팀 관리자) 화면 스펙

## TL;DR
- 팀 대시보드/작업함/작업 상세(기사 배정) 흐름을 정의.

## 본문
## T-03 팀 관리자 작업 상세 화면 스펙(기사 배정, 관리)

T-03 팀관리자 작업 상세 화면 스펙 (기사 배정/관리)
0) 화면 목표
• 팀관리자가 “내 팀으로 떨어진 작업”을 5~15초 내 기사 배정
• 진행 상황/증빙 상태를 한 눈에 확인
• 불필요한 수정 권한은 제한(분쟁/혼선 방지)

1) 접근 조건
• 역할: TEAM_MANAGER
• WorkOrder.assigned_team_id = 현재 사용자.team_id
• 상태: TEAM_ASSIGNED, TECH_ASSIGNED, IN_PROGRESS, COMPLETED (읽기/부분수정 정책)

2) 상단 헤더
• 좌측: ← 팀 작업함
• 중앙: [설치/AS] + 상태 배지
• 우측: ⋯ (옵션 메뉴: 취소/재배정 정책)
상태 배지:
• TEAM_ASSIGNED: 기사 미배정
• TECH_ASSIGNED: 기사 배정됨
• IN_PROGRESS: 진행중
• COMPLETED: 완료

3) 섹션 A: 작업 핵심 요약 카드(상단 고정 느낌)
표시
• 현장명 / 주소(간단)
• 방문 일정
• 우선순위(있으면)
• 고객/현장 담당자 연락 버튼
버튼
• 전화(현장 담당자)
• 지도 보기(선택)

4) 섹션 B: 기사 배정(핵심)
UI
• 라벨: 담당 기사
• 드롭다운: 기사 선택 (내 팀 TECHNICIAN만)
• 선택 시 기사 카드 미리보기(전화번호 포함)
버튼
• 배정하기 (TEAM_ASSIGNED 상태에서)
• 재배정하기 (TECH_ASSIGNED/IN_PROGRESS 상태에서 정책 허용 시)
동작 규칙
• TEAM_ASSIGNED에서 기사 선택 + 배정 클릭 →
o assigned_technician_id 설정
o 상태를 TECH_ASSIGNED로 전환
o AuditLog 기록(ASSIGN_TECH)
재배정 정책(권장)
• IN_PROGRESS에서는 재배정 제한(권한있는 경우에만)
• 재배정 시 사유 입력 모달(선택이지만 권장)
o “기사 사정/일정 변경/지역 변경/기타”

5) 섹션 C: 작업 정보(읽기 중심)
• 요약(summary)
• 특이사항(description)
• 고객 연락처/이메일(발송 기본값 확인용)
편집 가능 여부(권장)
• 팀관리자는 기본적으로 “배정/확인” 위주
• 일정 변경은 운영 정책에 따라 허용(허용한다면 여기서)

6) 섹션 D: 진행/증빙 상태 요약(완료 전에도 유용)
목적: 기사에게 “뭘 빠뜨렸는지” 팀관리자가 바로 알 수 있게
표시(아이콘 체크 방식)
• 체크리스트: 입력중 / 완료
• 서명: 미완료 / 완료
• 사진: 전 n장 / 후 n장 (없으면 0)
• PDF: 대기 / 생성중 / 완료
• 고객 발송: 미설정 / 발송대기 / 발송완료 / 실패
완료 이후엔 “문서 다운로드”와 “발송 재시도”가 핵심.

7) 섹션 E: 증빙 상세(읽기 전용)
• 체크리스트 결과(섹션별)
• FAIL 항목만 모아보기 토글(강추)
• 서명 미리보기
• 사진 갤러리

8) 섹션 F: 액션(정책 기반)
상태별 가능한 액션
• TEAM_ASSIGNED: 기사 배정(필수)
• TECH_ASSIGNED: 재배정(정책) / 일정 변경(정책)
• IN_PROGRESS: 재배정 제한(관리자 승인이면 가능)
• COMPLETED:
o PDF 다운로드
o 발송 재시도(권한 정책)
취소(CANCELLED)
• 원칙: 팀관리자는 기본적으로 취소 불가, 필요 시 Admin 요청 흐름
• 예외적으로 허용할 경우: 취소 사유 필수 입력

팀관리자 화면 문구(간단)
• 상태:
o 기사 미배정
o 기사 배정됨
• 버튼:
o 배정하기
o 재배정하기
• 토스트:
o 기사가 배정되었습니다
o 기사 재배정이 완료되었습니다
o 진행중인 작업은 재배정이 제한됩니다
• 검증:
o 기사를 선택해주세요
o 재배정 사유를 입력해주세요(정책 시)

T-03에 필요한 API 최소 세트
1. GET /api/workorders/{id} (팀 범위 검증)
2. GET /api/teams/{teamId}/technicians (드롭다운)
3. POST /api/workorders/{id}/assign-technician
o body: technician_id
4. POST /api/workorders/{id}/reassign-technician (정책)
o body: technician_id, reason
5. GET /api/workorders/{id}/attachments (증빙 상태/미리보기)
6. GET /api/workorders/{id}/delivery-status (완료 후 상태)

(본문 끝)
===

---

## T-02 팀 작업함(목록) UX 스펙

T-02 팀 작업함(목록) UX 스펙
0) 화면 목표
• **미배정 작업(기사 없음)**을 최우선 처리
• 팀 단위 작업 현황을 한눈에
• 배정/지연/진행중을 빠르게 정리

1) 기본 화면 구조
[상단 헤더]
• 제목: 팀 작업함
• 우측: 🔍 검색 아이콘(또는 검색창)
• (선택) 새로고침 버튼

[A. KPI 요약 바(얇게)]
• 오늘 8 | 미배정 3 | 진행중 2 | 지연 1 | 완료 5
• 각 KPI는 탭하면 필터 적용
KPI는 짧고 클릭 가능하게. 숫자만으로도 팀장이 바로 판단 가능.

[B. 기본 필터 탭(가장 중요)]
탭 4개만 추천:
1. 미배정 (기본값/디폴트 진입)
2. 오늘
3. 진행중
4. 전체
각 탭은 내부적으로 필터 프리셋:
• 미배정: status=TEAM_ASSIGNED (기사 없음)
• 오늘: scheduled_start_at=오늘
• 진행중: status=IN_PROGRESS
• 전체: 팀 범위 전체

[C. 추가 필터(접기/펼치기)]
• 기간(오늘/이번주/직접선택)
• 상태(복수 선택)
• 타입(설치/AS)
• 지역/현장명(검색 기반)
기본은 접힘.
현장 운영에서는 탭 프리셋이 80%를 해결해야 함.

[D. 작업 리스트(카드형 추천)]
카드 1개에 들어갈 정보는 “배정 판단에 필요한 최소”만.
카드 구성(권장)
• 좌측 상단 배지: [설치] 또는 [AS]
• 상태 배지:
o TEAM_ASSIGNED → 기사 미배정 (강조)
o TECH_ASSIGNED → 기사 배정됨
o IN_PROGRESS → 진행중
o COMPLETED → 완료
• 현장명(굵게)
• 주소(짧게, 1줄)
• 방문 일정(있으면)
• 고객사명(작게)
• 현재 배정 기사(있으면 이름만)
카드 액션(중요)
• 미배정 카드에는 ‘빠른 배정’ 버튼을 카드 내부에 바로 노출
o 기사 배정 (Primary)
• 배정된 카드에는
o 상세 보기 또는 카드 클릭으로 상세 이동
미배정 탭에서 “상세 들어갔다가 배정”은 한 단계 낭비라서,
미배정은 목록에서 바로 배정이 되게 하는 게 운영 효율이 압도적으로 좋음.

2) “빠른 배정(Quick Assign)” UX (목록에서 배정)
플로우
1. 카드의 기사 배정 클릭
2. 바텀시트/모달 뜸:
o 제목: 기사 배정
o 기사 선택 드롭다운(내 팀 기사)
o (선택) “가장 가까운/가장 한가한 기사” 추천 영역(2차)
3. 배정하기 클릭
4. 성공 토스트 + 카드가 목록에서 사라짐(미배정 탭이면)
모달 내용(초간단)
• 담당 기사 [드롭다운]
• (선택) 메모 (팀 내부 전달용)
• 버튼: 취소 / 배정하기
검증 문구
• 기사 미선택: 기사를 선택해주세요
성공 문구
• 기사가 배정되었습니다

3) 정렬 규칙(운영 현실)
미배정 탭/오늘 탭에서는 정렬이 중요해.
권장 정렬:
1. 방문 일정 빠른 순
2. 일정이 없으면 생성일 오래된 순(먼저 들어온 것 먼저)
3. 우선순위 HIGH가 있으면 상단 고정(선택)

4) 검색 UX
검색은 필드 통합 1개면 충분:
• placeholder: 현장명 / 고객명 / 주소 검색
• 입력하면 리스트 즉시 필터링(디바운스)

5) 빈 상태(Empty state) 문구
• 미배정 탭 빈 상태:
o 미배정 작업이 없습니다
o 작게: 오늘 작업 탭에서 전체 일정을 확인하세요
• 오늘 탭 빈 상태:
o 오늘 예정된 작업이 없습니다

6) 알림/배지(선택)
• 지연 작업이 있으면 탭에 빨간 점:
o 진행중 •
• 미배정이 5건 이상이면 경고 배지:
o 미배정 5 (색 강조)

7) T-02 화면용 마이크로카피(요약)
• 탭: 미배정 / 오늘 / 진행중 / 전체
• 버튼: 기사 배정 / 배정하기 / 취소
• 토스트:
o 기사가 배정되었습니다
o 배정에 실패했어요. 다시 시도해주세요
• 안내:
o 현장명 / 고객명 / 주소 검색

8) 필요한 API (T-02 관점)
1. GET /api/teams/{teamId}/workorders?preset=unassigned|today|inprogress|all
o 서버에서 팀 스코프 필터링
2. GET /api/teams/{teamId}/technicians
3. POST /api/workorders/{id}/assign-technician
4. (선택) PATCH /api/workorders/{id} (일정 변경 등)

9) 개발 우선순위(필드테스트 기준)
1. 미배정 탭 + 카드 + 빠른 배정 모달
2. 오늘 탭
3. 진행중 탭
4. 검색
5. 추가 필터(접기/펼치기)

(본문 끝)
===

---

## T-01 팀 대시보드 UX 스펙

T-01 팀 대시보드 UX 스펙
0) 화면 목표
• 팀관리자가 들어오자마자
1. **오늘 처리해야 할 것(미배정/지연)**을 즉시 파악
2. **기사별 부담(배정량/진행중)**을 보고 배정 조정
3. 한 번 클릭으로 작업함(T-02)으로 이동

1) 화면 구조(위 → 아래)
[헤더]
• 제목: 팀 대시보드
• 우측: 날짜 선택(기본 오늘) + 새로고침(선택)

[A. KPI 카드(가장 상단, 5개)]
카드는 클릭하면 T-02로 이동하며 필터 프리셋 적용.
1. 미배정
• 라벨: 미배정
• 값: 3
• 설명(작게): 기사 배정 필요
• 클릭 → T-02 preset=unassigned
2. 오늘 예정
• 라벨: 오늘 예정
• 값: 8
• 클릭 → preset=today
3. 진행중
• 라벨: 진행중
• 값: 2
• 클릭 → preset=inprogress
4. 지연
• 라벨: 지연
• 값: 1
• 정의(문서로 박아두기): “방문 일정이 지났는데 완료가 아닌 작업”
• 클릭 → preset=delayed (또는 preset=all + filter=delayed)
5. 완료
• 라벨: 완료
• 값: 5
• 클릭 → preset=completed (선택)
대시보드는 “전체 보기”보다 “문제 먼저(미배정/지연)”가 중요해서 이 순서 추천.

[B. 오늘 작업 타임라인(선택하지만 강추)]
• 제목: 오늘 일정
• 리스트(최대 8건만)
o 14:00 OO마트 OO점 [설치] 기사 미배정
o 16:00 OO빌딩 [AS] 진행중
규칙
• 미배정/지연 항목은 상단 고정(또는 강조)
• 클릭 → T-03 작업 상세로 이동
팀장들이 “오늘 일정”을 매우 자주 본다. 넣으면 체감 효율 상승.

[C. 기사별 현황(핵심 섹션)]
• 제목: 기사 현황
• 테이블/카드 형태 (모바일에서도 읽히게)
표시 항목(기사 1명당)
• 기사 이름 + 전화 아이콘(선택)
• 오늘 배정 (TECH_ASSIGNED + IN_PROGRESS + TEAM_ASSIGNED 중 본인 배정분만)
• 진행중
• 완료(오늘)
예시:
• 김기사 | 오늘 4 | 진행중 1 | 완료 2
• 이기사 | 오늘 2 | 진행중 0 | 완료 1
빠른 액션(선택)
• 배정하기 버튼
o 클릭하면 “미배정 목록(필터) + 해당 기사 프리셋 선택” 상태로 이동
o 또는 바로 “빠른 배정 모달”을 띄우되, 대상은 미배정 중 가장 가까운 일정 1~3건만 제안
Phase 1에서는 “배정하기 → 미배정 목록으로 이동”만 해도 충분히 좋아짐.

[D. 작업 유형 분포(설치/AS) – 가볍게]
• 제목: 유형별
• 설치: 5 / AS: 3 (오늘 기준)
• 클릭하면 T-02에서 해당 타입 필터 적용
복잡한 차트 말고 숫자만. 팀장은 차트보다 액션이 필요함.

[E. 최근 완료(선택)]
• 제목: 최근 완료
• 최근 5건만 표시
o 완료시간 / 현장 / 기사
• 클릭 → T-03 상세(읽기)

2) 대시보드 문구(마이크로카피)
• KPI 카드 설명
o 미배정: 기사 배정 필요
o 지연: 일정 경과
• 빈 상태
o 오늘 일정 없음: 오늘 예정된 작업이 없습니다
o 미배정 0: 미배정 작업이 없습니다

3) 데이터 산정 규칙(문서에 명시)
• 오늘 예정: scheduled_start_at이 오늘인 작업(팀 범위)
• 미배정: status=TEAM_ASSIGNED
• 진행중: status=IN_PROGRESS
• 완료(오늘): status=COMPLETED AND completed_at이 오늘
• 지연: scheduled_start_at < now AND status != COMPLETED/CANCELLED

4) 필요한 API (T-01 관점)
4.1 KPI/요약 한 번에
GET /api/teams/{teamId}/dashboard?date=YYYY-MM-DD
응답 예시:
• counts: {unassigned, today_total, in_progress, delayed, completed_today}
• today_timeline: [{id, time, site_name, type, status, technician_name?}]
• technician_stats: [{technician_id, name, today_total, in_progress, completed_today}]
• breakdown: {install, as}
대시보드는 “한 번에 가져오는” 게 UX/성능상 좋음.
4.2 링크 이동용(이미 정의된 T-02/T-03)
• T-02: /api/teams/{teamId}/workorders?preset=...
• T-03: /api/workorders/{id}

5) 구현 우선순위(Phase 1)
1. KPI 카드 + 클릭 이동
2. 기사별 현황
3. 오늘 일정(간단 리스트)
4. 유형별 숫자
5. 최근 완료

(본문 끝)
===

---

## T-01 팀 대시보드 스크린 텍스트 목업 v0.1

1) T-01 팀 대시보드 — 스크린 텍스트 목업 v0.1
[헤더]
팀 대시보드 📅 오늘 ▾ ⟳
(로딩 시 상단 토스트/인라인)
• 불러오는 중…
• 실패 시 불러오기 실패 · 재시도 재시도

[A. KPI 카드 5개] (클릭 가능)
미배정 3
작게: 기사 배정 필요
(클릭 → T-02 미배정 탭)
오늘 예정 8
(클릭 → T-02 오늘 탭)
진행중 2
(클릭 → T-02 진행중 탭)
지연 1
작게: 일정 경과
(클릭 → T-02 지연 프리셋/필터)
완료(오늘) 5
(클릭 → T-02 완료 필터)
빈 상태 예시:
• 미배정이 0이면 미배정 없음
• 오늘 일정이 0이면 오늘 일정 없음

[B. 오늘 일정] (최대 8건)
오늘 일정
14:00 OO마트 OO점 [설치] 기사 미배정
(클릭 → T-03 작업 상세)
15:30 OO빌딩 [AS] 진행중
(클릭 → T-03)
18:00 OO공장 [설치] 기사 배정됨
(클릭 → T-03)
빈 상태:
• 오늘 일정 없음

[C. 기사 현황] (핵심)
기사 현황
검색(선택): [ 기사명 검색 ]
기사 카드(또는 테이블 행)
• 김기사 오늘 4 | 진행중 1 | 완료(오늘) 2 배정하기
• 이기사 오늘 2 | 진행중 0 | 완료(오늘) 1 배정하기
• 박기사 오늘 0 | 진행중 0 | 완료(오늘) 0 배정하기
배정하기 클릭 동작(Phase 1 추천)
• → T-02로 이동 + 미배정 탭 + (선택) 기사 프리셋 highlight

[D. 유형별] (간단)
유형별
• 설치 5
• AS 3
(각 항목 클릭 → T-02에서 타입 필터 적용)

[E. 최근 완료] (선택)
최근 완료
11:20 OO마트 OO점 김기사
10:05 OO빌딩 이기사

[하단 내비게이션/링크(선택)]
• 작업함 보기 (T-02로)

(본문 끝)
===

---

## T-02 팀 작업함 스크린 텍스트 목업 v0.1

2) T-02 팀 작업함(목록) — 스크린 텍스트 목업 v0.1
[헤더]
← 팀 대시보드 팀 작업함 🔍

[A. 탭(프리셋)]
미배정 | 오늘 | 진행중 | 전체
기본 진입: 미배정 탭

[B. 검색(상단 고정 추천)]
[ 현장/고객/주소 검색 ]
(검색 결과 없음)
• 검색 결과 없음

[C. 추가 필터(접기/펼치기) — 기본 접힘]
필터 ▾
펼치면:
• 기간: 오늘 이번주 직접선택
• 타입: 설치 AS
• 상태: 기사 미배정 / 기사 배정됨 / 진행중 / 완료 / 취소
• 버튼: 적용 초기화

[D. 리스트 카드들]
1) 미배정 카드(가장 중요한 형태)
배지: [설치] 상태: 기사 미배정
OO마트 OO점
주소: 서울시 … … (1줄)
일정: 14:00 (있으면)
하단 액션:
• 기사 배정 (Primary)
• 상세 보기 (선택, 카드 전체 클릭으로 대체 가능)

2) 기사 배정됨 카드
배지: [AS] 상태: 기사 배정됨
OO빌딩
주소: …
일정: 16:00
기사: 김기사
액션:
• 상세 보기 (또는 카드 클릭)

3) 진행중 카드
배지: [설치] 상태: 진행중
OO공장
주소: …
기사: 이기사

4) 완료 카드(기본은 전체 탭에서 주로 보임)
배지: [AS] 상태: 완료
OO연구소
완료: 11:20
기사: 박기사

[E. “기사 배정” 모달(퀵 배정)] ← 미배정 카드에서 호출
제목: 기사 배정
담당 기사
[ 기사를 선택해주세요 ▾ ]
(선택) 메모
[ 메모 입력(선택) ]
placeholder: 팀 내부 전달용
버튼:
• 취소
• 배정하기
검증:
• 기사 미선택 → 기사를 선택해주세요
성공 토스트:
• 기사 배정 완료
→ 미배정 탭에서는 해당 카드가 즉시 사라짐
실패 토스트:
• 배정 실패 · 재시도 재시도

[F. 빈 상태]
• 미배정 탭에서 0건:
o 미배정 없음
• 오늘 탭에서 0건:
o 오늘 일정 없음

[G. 리스트 하단(페이지네이션/더보기)]
• 더 보기 또는 무한 스크롤(선택)
• 로딩: 불러오는 중…

(본문 끝)
===

---

## T-03 팀 작업 상세 스크린 텍스트 목업 v0.1

3) T-03 팀 작업 상세 — 스크린 텍스트 목업 v0.1
[헤더]
← 팀 작업함 작업 상세 [설치] 기사 미배정 ⋯
⋯ 메뉴(선택)
• 새로고침
• (정책) 취소 요청 / 관리자에게 요청

[A. 요약 카드]
OO마트 OO점
주소: 서울시 … … …
지도 보기 전화
일정: 2026-02-12 14:00
고객사: OO유통(주)
현장 담당자: 홍길동

[B. 담당 기사(핵심)]
담당 기사
[ 기사를 선택해주세요 ▾ ] 배정하기
• 기사 배정됨 상태에서는:
o 김기사 (010-****-****) 재배정
(재배정 클릭 시 모달)
제목: 기사 재배정
담당 기사
[ 기사를 선택해주세요 ▾ ]
사유 (선택/권장)
[ 사유 입력 ]
placeholder: 예) 일정 변경
버튼:
• 취소
• 변경
제약 토스트(진행중일 때):
• 진행중 작업은 재배정이 제한돼요
성공 토스트:
• 재배정 완료
실패 토스트:
• 재배정 실패 · 재시도 재시도

[C. 작업 정보]
요약
공간살균기 설치
특이사항
출입문 오른쪽 벽면 설치 요청
(TeamManager 편집은 기본 ❌, 정책으로 열면 수정 버튼 노출)
• 수정 (선택)

[D. 증빙 상태(한눈에)] ✅/⚠️ 중심
증빙 상태
• 체크리스트: 입력중 / 완료 ✅
• 서명: 미완료 ⚠️ / 완료 ✅
• 사진: 전 1 / 후 0
• 문서(PDF): 없음 / 생성중… / 준비됨
• 고객 발송: 설정 안 됨 / 발송 완료 / 실패 ⚠️
이 섹션은 항상 “문제(⚠️)”가 눈에 띄게.

[E. 체크리스트(읽기)] (접기/펼치기)
체크리스트 ▾
펼치면(요약 우선):
• OK 9 / 이상 1 / 해당없음 2
토글:
• 전체 | 이상만
리스트(이상만 예시):
• 에러 없음/처리완료 → 이상
메모: 전원 불량 → 차단기 확인 후 정상

[F. 서명(읽기)]
서명
• 상태: 미완료 ⚠️
또는 완료 시:
• 홍길동 / 14:32
• [서명 미리보기 썸네일]

[G. 사진(읽기)]
사진
• 작업 전: [썸네일] x1
• 작업 후: 0

[H. 문서/발송(읽기)]
문서(PDF)
• 없음 (완료 전)
• 또는 준비됨 PDF 다운로드
발송
• 문자: 설정 안 됨
• 이메일: 설정 안 됨

(본문 끝)
===

## 연관 문서
- [화면 지도](01-screen-map.md)

## 변경 이력
- v0.1: 통합문서 기반 초안 정리
