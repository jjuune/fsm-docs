# Admin(본사 관리자) 화면 스펙

## TL;DR
- 작업 목록/상세 중심으로 Phase1 운영이 가능한 최소 기능을 정의.

## 본문
## A-02 본사 관리자 작업 목록 UX 스펙

오케이 쭌. 그럼 바로 **A-02 본사 관리자 작업 목록 UX(팀 배정 중심)**으로 간다.
팀 대시보드랑 동일 철학: 문제 먼저 + 목록에서 바로 처리(퀵액션).

A-02 본사 관리자 작업 목록 UX 스펙 (팀 배정 중심)
0) 화면 목표
• 본사 관리자가 들어오자마자
1. 팀 미배정 작업을 즉시 보고
2. 목록에서 1~2클릭으로 팀 배정
3. 지연/진행/완료 상태를 빠르게 모니터링

1) 화면 구조(위 → 아래)
[헤더]
• 제목: 작업 목록
• 우측: 새 작업(Primary) + 🔍 검색

[A. KPI 카드(상단, 클릭 가능)]
1. 팀 미배정
• 라벨: 팀 미배정
• 값: 예 4
• 설명: 팀 배정 필요
• 클릭 → 프리셋 팀 미배정
2. 오늘 예정
• 라벨: 오늘 예정
• 값: 12
• 클릭 → 프리셋 오늘
3. 진행중
• 라벨: 진행중
• 값: 5
• 클릭 → 프리셋 진행중
4. 지연
• 라벨: 지연
• 값: 2
• 클릭 → 프리셋 지연
5. 완료(오늘)
• 라벨: 완료(오늘)
• 값: 7
• 클릭 → 프리셋 완료
팀관리자 대시보드와 KPI 정의를 최대한 동일하게 유지(운영 혼선 방지).

[B. 프리셋 탭(기본 4개)]
• 팀 미배정(기본 진입 탭)
• 오늘
• 지연
• 전체
프리셋 조건:
• 팀 미배정: status=DRAFT 또는 assigned_team_id is null (정책에 따라)
o 권장: “DRAFT는 본사 작업중”, “TEAM_ASSIGNED는 팀 배정됨”
o 즉, 본사 목록에서 팀 미배정은 assigned_team_id null 기준이 가장 깔끔
• 오늘: scheduled_start_at=오늘
• 지연: scheduled_start_at < now AND status != COMPLETED/CANCELLED
• 전체: 전체

[C. 추가 필터(접기/펼치기)]
• 기간: 오늘/이번주/직접 선택
• 상태: 다중 선택
• 타입: 설치/AS
• 팀: 드롭다운
• 지역: region_code 또는 주소 검색(선택)
• 검색창: 현장명/고객명/주소/작업ID
기본은 탭으로 해결, “상세 필터”는 예외 상황에서만.

[D. 작업 리스트(테이블 or 카드)]
본사는 PC 비중이 높을 확률이 크니 테이블형이 효율적.
(모바일에서도 되게 하려면 카드+테이블 토글도 가능)
테이블 컬럼(권장 최소)
• 상태
• 타입(설치/AS)
• 일정
• 고객사 / 현장명
• 지역(선택)
• 배정 팀
• 배정 기사(읽기만)
• 액션
상태 표기(본사용)
• 팀 미배정 (assigned_team_id null)
• 팀 배정됨
• 기사 배정됨
• 진행중
• 완료
• 취소

2) “퀵 팀 배정(Quick Assign Team)” UX (목록에서 바로 배정)
표시 조건
• assigned_team_id가 없는 행/카드에만 액션 노출:
o 버튼: 팀 배정
플로우
1. 목록에서 팀 배정 클릭
2. 모달/바텀시트:
o 제목: 팀 배정
o 팀 선택 드롭다운(활성 팀만)
o (선택) 메모(팀에게 전달)
3. 배정하기 클릭
4. 성공 토스트: 팀이 배정되었습니다
5. 해당 행은 “팀 미배정” 목록에서 사라짐
검증
• 팀 미선택: 팀을 선택해주세요
정책(권장)
• 팀 배정 시 WorkOrder.status를 TEAM_ASSIGNED로 전환
• AuditLog: ASSIGN_TEAM 기록

3) 목록에서 가능한 추가 액션(Phase 1 최소)
• 상세 보기 (항상 가능)
• 취소 (선택: 보통은 상세에서만, 실수 방지)
• 재배정 (팀 변경은 가능하되 사유 입력 권장)

4) 정렬 규칙(운영 현실)
프리셋별 정렬 추천:
• 팀 미배정: 생성 오래된 순(또는 일정 빠른 순 우선)
• 오늘: 일정 빠른 순
• 지연: 지연 오래된 순(가장 위험한 것부터)
• 전체: 생성 최신 순(기본)

5) Empty state 문구
• 팀 미배정 탭:
o 팀 미배정 작업이 없습니다
• 오늘 탭:
o 오늘 예정된 작업이 없습니다
• 지연 탭:
o 지연된 작업이 없습니다

6) A-02 마이크로카피(요약)
• 탭: 팀 미배정 / 오늘 / 지연 / 전체
• 버튼: 팀 배정 / 배정하기 / 취소 / 상세 보기
• 토스트:
o 팀이 배정되었습니다
o 배정에 실패했어요. 다시 시도해주세요

7) 필요한 API (A-02 관점)
7.1 KPI + 목록 프리셋
• GET /api/admin/workorders?preset=unassigned_team|today|delayed|all&date=YYYY-MM-DD&...
7.2 팀 목록(드롭다운)
• GET /api/admin/teams?active=true
7.3 팀 배정
• POST /api/workorders/{id}/assign-team
o body: team_id, memo?

8) Phase 1 구현 우선순위
1. 팀 미배정 탭 + 목록 + 퀵 팀 배정 모달
2. 오늘/지연 탭
3. 검색
4. 추가 필터(접기/펼치기)
5. 테이블 정렬/저장(개인화는 2차)

(본문 끝)
===

---

## A-04 본사 관리자 작업 상세 화면 스펙

좋아 쭌. 바로 A-04 본사 관리자 작업 상세를 “최종 컨트롤 타워” 기준으로 스펙화한다.
(팀/기사 배정 흐름의 최상단, 취소/재발송/문서 확인까지 모두 여기서 관리)

A-04 본사 관리자 작업 상세 화면 스펙
0) 화면 목표
• 작업 1건을 “생성→팀배정→(진행 모니터링)→완료 문서/발송 확인”까지 한 화면에서 컨트롤
• 분쟁/누락을 막기 위해 변경권한을 명확히 제한
• 문제(지연/발송 실패/서명 누락 등)를 즉시 감지하고 조치

1) 접근 조건
• 역할: ADMIN
• 모든 WorkOrder 조회 가능 (단, 삭제는 금지 / 취소로 처리)

2) 상단 헤더
• 좌측: ← 작업 목록(A-02)
• 중앙: 작업 ID + [설치/AS] + 상태 배지
• 우측: ⋯ 메뉴
o 취소 처리
o 재발송
o PDF 다운로드
o (선택) AuditLog 보기
상태 배지:
• DRAFT: 작성중
• TEAM_ASSIGNED: 팀 배정됨
• TECH_ASSIGNED: 기사 배정됨
• IN_PROGRESS: 진행중
• COMPLETED: 완료
• CANCELLED: 취소

3) 섹션 A: 요약 카드(상단, 항상 먼저 보이게)
표시
• 고객사명 / 현장명
• 주소 + 지도 보기
• 현장 담당자 전화/이메일
• 방문 일정(예정)
• 우선순위
• 생성일/생성자(있으면)
빠른 액션
• 전화 / 지도
• (선택) 고객 정보 보기(Customer 상세로)

4) 섹션 B: 배정 컨트롤(관리자 핵심)
B1. 팀 배정
• 라벨: 배정 팀
• 드롭다운: 활성 팀 목록
• 버튼:
o 팀 배정하기 (assigned_team_id가 없을 때)
o 팀 변경하기 (이미 배정된 경우)
정책(권장)
• IN_PROGRESS 이후 팀 변경은 제한(혼선 방지)
• 변경 허용 시 사유 입력 모달 필수
모달 문구:
• 제목: 팀을 변경할까요?
• 입력: 변경 사유 (필수)
• 버튼: 취소 / 변경
B2. 기사 배정(표시 중심)
• 라벨: 담당 기사
• 값: 기사명/연락처
• 기본 정책: Admin은 보기만
o (예외) “긴급 재배정” 기능이 필요하면 별도 옵션으로만
운영상 “본사가 기사까지 직접 배정”은 팀 권한을 깨서 혼선이 생길 수 있어. 기본은 팀에게 맡기는 게 안정적.

5) 섹션 C: 작업 내용(편집 가능 영역)
필드
• 타입: INSTALL / AS (DRAFT에서만 변경 가능 권장)
• 요약(summary)
• 상세(description)
• 방문 일정(scheduled_start/end)
• 우선순위
편집 정책
• DRAFT/TEAM_ASSIGNED까지만 편집 허용 권장
• TECH_ASSIGNED 이후 편집은 제한(이력 꼬임 방지)
• 변경 시 AuditLog에 before/after 기록

6) 섹션 D: 진행/증빙/문서/발송 상태 (운영 핵심 “상태판”)
각 항목을 “한 줄 상태 + 문제 강조”로 보여준다.
D1. 체크리스트
• 상태: 진행중 / 완료
• 클릭: 체크리스트 상세 펼침
• FAIL 항목만 보기 토글(강추)
D2. 서명
• 상태: 미완료 / 완료
• 완료 시: 서명자 이름 + 시간 + 미리보기
• 문제 시 강조 문구:
o 서명 누락 (완료 제출 불가) (원칙상 시스템에서 완료 자체가 막히지만, 데이터 마이그레이션/예외 대비)
D3. 사진
• 전 사진: n장
• 후 사진: n장
• 클릭: 갤러리
D4. PDF 문서
• 상태:
o 없음(아직 완료 전)
o 생성 대기
o 생성중
o 완료
• 버튼:
o PDF 다운로드 (완료일 때)
• 실패 시:
o PDF 생성 실패 + 재생성 버튼(옵션)
D5. 고객 발송
• 문자:
o 설정 안 됨 / 발송 대기 / 발송 완료 / 실패
• 이메일:
o 설정 안 됨 / 발송 대기 / 발송 완료 / 실패
• 실패 시 버튼:
o 문자 재발송
o 이메일 재발송
“재발송”은 관리자 상세에서만 제공(권장). 책임/통제 측면에서 안전.

7) 섹션 E: 상세 데이터(접기/펼치기)
• 체크리스트 전체 결과(섹션별)
• AuditLog 요약(최근 10개)
o 생성/배정/상태 변경/완료/발송 등
• 첨부 파일 리스트(파일명/업로드자/시간)

8) 주요 액션 정책 (실운영 안정화 포인트)
8.1 취소(CANCELLED)
• 관리자만 가능
• 취소 사유 필수
• 상태가 COMPLETED면 취소 금지(원칙)
o 필요하면 “무효 처리” 같은 별도 프로세스(Phase 2)
취소 모달 문구:
• 제목: 작업을 취소할까요?
• 입력: 취소 사유 (필수)
• 버튼: 취소 / 취소 처리
8.2 재발송
• COMPLETED 상태에서만 가능(권장)
• 발송 대상(번호/이메일)은 보이되 수정은 제한
o 수정이 필요하면 “고객 정보 수정” 플로우로 유도
재발송 모달(선택):
• 제목: 문서를 재발송할까요?
• 체크: 문자 이메일
• 버튼: 취소 / 재발송

9) A-04 마이크로카피(요약)
• 팀을 선택해주세요
• 팀이 배정되었습니다
• 팀이 변경되었습니다
• 변경 사유를 입력해주세요
• PDF 생성중입니다
• 발송에 실패했어요. 재발송을 시도해주세요
• 취소 사유를 입력해주세요
• 작업이 취소되었습니다

10) A-04 필요한 API 최소 세트
조회
• GET /api/workorders/{id} (상세)
• GET /api/workorders/{id}/attachments
• GET /api/workorders/{id}/delivery-status
• GET /api/workorders/{id}/auditlogs?limit=50 (선택)
수정/액션
• PATCH /api/workorders/{id} (일정/우선순위/내용)
• POST /api/workorders/{id}/assign-team (팀 배정/변경)
o body: team_id, reason?
• POST /api/workorders/{id}/cancel
o body: reason
• POST /api/workorders/{id}/resend
o body: {sms: bool, email: bool}
문서
• GET /api/workorders/{id}/pdf (다운로드/링크)
• (선택) POST /api/workorders/{id}/pdf/regenerate

11) Phase 1에서 꼭 지켜야 할 “운영 안정성 규칙”
• 완료(COMPLETED) 이후 핵심 데이터(체크리스트/서명)는 수정 제한
• 팀 변경은 IN_PROGRESS 이후 제한 + 사유 기록
• 재발송은 관리자만 가능
• 모든 액션은 AuditLog 기록

(본문 끝)
===

---

## A-02 본사 관리자 작업 목록 스크린 텍스트 목업 v0.1

좋아 쭌. 이어서 4) A-02 본사 관리자 작업 목록 텍스트 목업이야.
(본사는 “팀 미배정 처리”가 최우선이라 목록에서 팀 배정이 핵심 UX)

4) A-02 본사 관리자 작업 목록 — 스크린 텍스트 목업 v0.1
[헤더]
작업 목록 새 작업 🔍

[A. KPI 카드(클릭 가능)]
팀 미배정 4 (작게: 팀 배정 필요)
오늘 예정 12
진행중 5
지연 2 (작게: 일정 경과)
완료(오늘) 7
(각 KPI 클릭 → 해당 탭/필터 적용)

[B. 탭(프리셋)]
팀 미배정 | 오늘 | 지연 | 전체
기본 진입: 팀 미배정

[C. 검색/필터]
검색창:
[ 현장/고객/주소/ID 검색 ]
필터 ▾ (기본 접힘)
펼치면:
• 기간: 오늘 이번주 직접선택
• 타입: 설치 AS
• 상태: 작성중 / 팀 배정됨 / 기사 배정됨 / 진행중 / 완료 / 취소
• 팀: [ 전체 ▾ ]
• 버튼: 적용 초기화

[D. 목록(테이블형 권장)]
컬럼 예시:
• 상태 | 타입 | 일정 | 고객/현장 | 지역 | 배정 팀 | 기사 | 액션
1) 팀 미배정 행 (가장 중요)
상태: 팀 미배정
타입: 설치
일정: 14:00
고객/현장: OO유통 / OO마트 OO점
배정 팀: -
기사: -
액션: 팀 배정 상세
2) 팀 배정됨 행
상태: 팀 배정됨
배정 팀: 강남팀
기사: -
액션: 상세
3) 진행중/지연
상태: 진행중
또는 지연 탭에서
상태: 지연
액션: 상세

[E. “팀 배정” 모달(퀵 배정)]
(팀 미배정 행의 팀 배정 클릭 시)
제목: 팀 배정
배정 팀
[ 팀을 선택해주세요 ▾ ]
메모 (선택)
[ 메모 입력(선택) ]
placeholder: 팀에 전달할 내용
버튼:
• 취소
• 배정하기
검증:
• 팀 미선택 → 팀을 선택해주세요
성공 토스트:
• 팀 배정 완료
→ 팀 미배정 탭에서는 해당 행이 즉시 사라짐
실패 토스트:
• 배정 실패 · 재시도 재시도

[F. 빈 상태]
• 팀 미배정 0건:
o 팀 미배정 작업이 없습니다
• 검색 결과 없음:
o 검색 결과 없음

(본문 끝)
===

---

## A-04 본사 관리자 작업 상세 스크린 텍스트 목업 v0.1

5) A-04 본사 관리자 작업 상세 — 스크린 텍스트 목업 v0.1
[헤더]
← 작업 목록 작업 상세 #WO-1042 [설치] 진행중 ⋯
⋯ 메뉴(권장)
• PDF 다운로드 (가능할 때)
• 재발송
• 취소 처리
• 새로고침
• (선택) 히스토리

[A. 요약 카드]
OO마트 OO점
고객사: OO유통(주)
주소: 서울시 … … …
지도 보기 전화 이메일
일정: 2026-02-12 14:00
우선순위: NORMAL

[B. 배정(핵심 컨트롤)]
배정 팀
[ 강남팀 ▾ ] 팀 변경
• 팀 미배정 상태라면:
o [ 팀을 선택해주세요 ▾ ] 팀 배정
팀 배정/변경 모달
제목: 팀 배정 또는 팀 변경
배정 팀
[ 팀을 선택해주세요 ▾ ]
(팀 변경일 때만) 변경 사유(필수)
[ 변경 이유를 적어주세요 ]
버튼:
• 취소
• 배정하기 또는 변경
토스트:
• 팀 배정 완료
• 변경 완료
• 실패: 처리 실패 · 재시도
담당 기사(표시)
담당 기사
• 김기사 (010-****-****)
• 배정 전이면 -
기본 정책: Admin은 기사 배정/변경 없음(읽기만)

[C. 작업 내용(편집 영역 — 상태 제한)]
요약
[ 공간살균기 설치 ]
특이사항
[ 출입문 오른쪽 벽면 설치 요청 ]
방문 일정
[ 2026-02-12 14:00 ]
버튼(허용 상태에서만 노출):
• 저장
저장 토스트:
• 저장됨
• 실패: 저장 실패 · 재시도
(상태 제한 메시지)
• 진행중 이후에는 수정이 제한돼요

[D. 증빙/문서/발송 상태판] ✅/⚠️ 중심
증빙/문서/발송
• 체크리스트: 입력중 / 완료 ✅ 보기
• 서명: 미완료 ⚠️ / 완료 ✅ 보기
• 사진: 전 2 / 후 1 보기
• 문서(PDF): 문서 생성중… / 문서 준비됨 ✅ PDF 다운로드
• 발송(문자): 설정 안 됨 / 발송 완료 ✅ / 실패 ⚠️
• 발송(이메일): 설정 안 됨 / 발송 완료 ✅ / 실패 ⚠️
실패인 경우 오른쪽 액션:
• 문자 실패 → 재발송
• 이메일 실패 → 재발송

[E. 체크리스트 보기(읽기)] (접기/펼치기 or 상세 패널)
체크리스트 ▾
펼치면:
• OK 9 / 이상 1 / 해당없음 2
토글: 전체 | 이상만

[F. 서명 보기(읽기)]
서명
• 완료 시: 홍길동 / 14:32
• [서명 미리보기]

[G. 사진 보기(읽기)]
사진
• 작업 전: [썸네일…]
• 작업 후: [썸네일…]

[H. 재발송 모달]
(상단 ⋯ 메뉴 또는 발송 실패 항목의 재발송 클릭)
제목: 재발송할까요?
☑ 문자
☑ 이메일
버튼:
• 취소
• 재발송
토스트:
• 재발송 요청 완료
• 실패: 처리 실패 · 재시도

[I. 취소 처리 모달]
(⋯ 메뉴 → 취소 처리)
제목: 작업을 취소할까요?
취소 사유(필수)
[ 취소 이유를 적어주세요 ]
버튼:
• 닫기
• 취소 처리
토스트:
• 취소 완료
• 실패: 처리 실패 · 재시도
(완료 상태 취소 시)
• 완료된 작업은 취소할 수 없어요

[J. 히스토리(선택, 접기/펼치기)]
히스토리
• 12:10 팀 배정(강남팀) - 관리자
• 12:30 기사 배정(김기사) - 팀장
• 14:32 서명 저장 - 기사
• 14:40 완료 제출 - 기사
• 14:41 PDF 생성중… - 시스템

(본문 끝)
===

## 연관 문서
- [화면 지도](01-screen-map.md)

## 변경 이력
- v0.1: 통합문서 기반 초안 정리
